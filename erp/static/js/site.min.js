function getRandomValues(){for(var t=new Array(20),e=0;e<t.length;e++)t[e]=[5+randomVal(),10+randomVal(),15+randomVal(),20+randomVal(),30+randomVal(),35+randomVal(),40+randomVal(),45+randomVal(),50+randomVal()];return t}function randomVal(){return Math.floor(80*Math.random())}if($(".number-chart .inlinesparkline").length>0){var randomVal=getRandomValues(),sparklineNumberChart=function(){var t={width:"140px",height:"30px",lineWidth:"2",lineColor:"#1D92AF",fillColor:!1,spotRadius:"2",highlightLineColor:"#aedaff",highlightSpotColor:"#71aadb",spotColor:!1,minSpotColor:!1,maxSpotColor:!1,disableInteraction:!1};$("#number-chart1").sparkline(randomVal[0],t),$("#number-chart2").sparkline(randomVal[1],t),$("#number-chart3").sparkline(randomVal[2],t),$("#number-chart4").sparkline(randomVal[3],t)};sparklineNumberChart()}var sparkResize;$(window).resize(function(t){clearTimeout(sparkResize),$(".sparkline-stat-item .inlinesparkline").length>0&&(sparkResize=setTimeout(sparklineStat,200)),$(".secondary-stat-item .inlinesparkline").length>0&&(sparkResize=setTimeout(sparklineWidget,200))}),$.validator&&$.validator.setDefaults({ignore:'input[type="hidden"], .tt-hint, .ignore',onkeyup:!1}),function(){for(var t,e=function(){},a=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],i=a.length,n=window.console=window.console||{};i--;)t=a[i],n[t]||(n[t]=e);Number.prototype.toFormattedString=function(t){return t||(t=2),this>=0?this.toFixed(t).replace(/\d(?=(\d{3})+\.)/g,"$&,"):"("+Math.abs(this).toFixed(t).replace(/\d(?=(\d{3})+\.)/g,"$&,")+")"},Array.prototype.remove=function(t){var e=this.indexOf(t);-1!==e&&this.splice(e,1)}}(),function(t){t.fn.clickToggle=function(e,a){return this.each(function(){var i=!1;t(this).bind("click",function(){return i?(i=!1,a.apply(this,arguments)):(i=!0,e.apply(this,arguments))})})},t.fn.simulateLoading=function(){t(this).append(t("<div/>",{"class":"loading",text:"Loading&hellip;"}))},t.fn.autoGrowInput=function(e){return e=t.extend({maxWidth:1e3,minWidth:0,comfortZone:50},e),this.filter("input:text").each(function(){var a=e.minWidth||t(this).width(),i="",n=t(this),o=t("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),fontWeight:n.css("fontWeight"),letterSpacing:n.css("letterSpacing"),whiteSpace:"nowrap"}),s=function(){if(i!==(i=n.val())){var t=i.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");o.html(t);var s=o.width(),r=s+e.comfortZone>=a?s+e.comfortZone:a,l=n.width(),d=l>r&&r>=a||r>a&&r<e.maxWidth;d&&n.width(r)}};o.insertAfter(n),t(this).bind("keyup keydown blur update",s)}),this},t.fn.wysiwyg_editor=function(e){var a=t(this),i=parseInt(a.data("height")||"300"),n={toolbar:[["style",["bold","italic","underline","clear"]],["font",["strikethrough","superscript","subscript"]],["fontsize",["fontname","fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]]],height:i,onBlur:function(){var e=a.data("input");t(e).val(t(this).code())}};void 0!=t.fn.wysiwyg_editor.defaults&&(n=t.extend(n,t.fn.wysiwyg_editor.defaults)),void 0!=e&&(n=t.extend(n,e)),a.summernote(n)},t.fn.printReport=function(t){if(t){var e=t.url,a=t.form,i=a.action;if(t.beforeSubmit){var n=t.beforeSubmit(a);if(n===!1)return}a.action=e,a.target="_blank",a.submit(),a.action=i,a.target="_self",t.success&&t.success(a)}},t.fn.attachGridPlugins=function(){var e=t(document),a=t(this).find("#form-grid"),i=t("div.searchbox"),n=function(){i.find("input").css({textIndent:i.find(".tags").width()})},o=function(e){var a=t(e).data("tag"),i=a.split(":"),n=i[0].toLowerCase(),o=i[1].trim(),s=t("<span>",{"class":"tag label","data-tag-type":n,"data-tag-value":o}).text(a).append(t("<span>",{"data-role":"remove"}));return s},s=function(t){t.remove(),n(),l(),a.submit()},r=function(e){for(var a=t(e).attr("class").split(" "),i=0;i<a.length;i++)if(/^label/.test(a[i]))return a[i];return"label-info"},l=function(){var e=i.find(".tag"),n=a.find("#search-params");n.html(null),e.each(function(){var e=t("<input>",{type:"hidden",name:t(this).data("tagType"),value:t(this).data("tagValue")});n.append(e)})};e.on("click","div.searchbox",function(){t(this).addClass("focus"),t(this).find("input").focus()}),e.on("focusout","div.searchbox",function(){t(this).removeClass("focus")}),e.on("click","div.searchbox [data-role=remove]",function(){s(t(this).closest(".tag"))}),e.on("click",".inbox-left-menu .tags li a[data-remove-tag]",function(e){e.preventDefault();var a=i.find(".tags"),n=t(this).data("removeTag").toLowerCase(),o=a.find("[data-tag-type="+n+"]");s(o)}),e.on("click",".inbox-left-menu .tags li a[data-tag]",function(e){e.preventDefault();var s=o(this),d=s.data("tagType"),c=i.find(".tags"),f=c.find("[data-tag-type="+d+"]"),u=r(t(this).closest("li").find("i"));s.addClass(u),f.length>0&&f.remove(),c.append(s),n(),l(),a.submit()}),e.on("click","#refresh",function(){a.submit()}),e.on("click","#print",function(){var e=t("<div/>");t(this).printReport({url:t(this).data("url"),form:document.getElementById("form-grid"),beforeSubmit:function(){var a=t(".message-table tr.highlighted");if(a.length<=0)return!1;var i=document.getElementById("form-grid");t.each(a,function(a,i){var n=t("<input/>",{type:"hidden",name:"id-"+a,value:t(this).data("uid")});e.append(n)}),t(i).append(e)},success:function(){e.remove()}})}),e.on("click",".inbox-nav-toggle",function(){t(".inbox-left-menu").toggleClass("active")}),e.on("click",".pager li > a",function(e){if(e.preventDefault(),!t(this).hasClass("disabled")){var i=t(this).find("i"),n=i.hasClass("fa-angle-left")?-1:i.hasClass("fa-angle-right")?1:0,o=t(this).closest(".pager"),s=parseInt(o.data("currentpage"))+n,r=a.attr("action");t(".messages").simulateLoading(),a.ajaxSubmit({type:"POST",url:r,data:{page:s},success:function(e){t(".inbox-content").html(e)}})}}),e.on("change",".message-table .fancy-checkbox",function(e){e.stopPropagation(),t(this).find(":checkbox").is(":checked")?t(this).parents("tr").addClass("highlighted"):t(this).parents("tr").removeClass("highlighted"),t(".message-table tr.highlighted").length>0?(t(".top-menu .context-menu").removeClass("hide"),t(".top-menu .toggle-menu").addClass("hide")):(t(".top-menu .context-menu").addClass("hide"),t(".top-menu .toggle-menu").removeClass("hide")),t(".top-menu .fancy-checkbox-all").find(":checkbox").prop("checked",0===t(".message-table tr:not(.highlighted)").length)}),e.on("change",".top-menu .fancy-checkbox-all",function(){var e=t(".message-table tr:not(.empty-row)");0!=e.length&&(t(this).find(":checkbox").is(":checked")?(e.find(".fancy-checkbox>:checkbox").prop("checked",!0),e.addClass("highlighted"),t(".top-menu .context-menu").removeClass("hide"),t(".top-menu .toggle-menu").addClass("hide")):(e.find(".fancy-checkbox>:checkbox").prop("checked",!1),e.removeClass("highlighted"),t(".top-menu .context-menu").addClass("hide"),t(".top-menu .toggle-menu").removeClass("hide")))}),e.on("click",".row-update:not(.disabled)",function(e){var i=t(this).data("update"),n=t(this).data("updateType").toLowerCase(),o=t(this).closest("[data-url]"),s=o.data("url"),r=t(".message-table tr.highlighted");if(e.preventDefault(),t(".dropdown-toggle").parent().removeClass("open"),r.length>0&&confirm("This will update "+r.length+" record(s) to "+i.toUpperCase()+" "+n+".\n Confirm action?")){var l={};l["new-"+n]=i,t.each(r,function(e,a){l["id-"+e]=t(this).data("uid")}),t(".messages").simulateLoading(),a.ajaxSubmit({type:"POST",url:s,data:l,success:function(e){t(".inbox-content").html(e),t.resizeToFit()},error:function(t){if("403"==t.status){var e=document.open("text/html","replace");e.write(t.responseText),e.forms[0].elements.came_from.value=location.href,e.close()}}})}})},t.fn.serializeObject=function(e){var a={},i=this.serializeArray();return t.each(i,function(){var t=this.name;e&&(t=e(t)),void 0!==a[t]?(a[t].push||(a[t]=[a[t]]),a[t].push(this.value||"")):a[t]=this.value||""}),a},t.fn.attachFormPlugins=function(){var e=function(t){var e=t.data(),a={};for(var i in e)if(/^options/.test(i)){var n=i.replace(/^options/,""),o=n.toLowerCase();n.length>1&&(o=n.substr(0,1).toLowerCase()+n.substr(1)),a[o]=e[i]}return a};return t.fn.multiselect&&t(this).find(".multiselect").multiselect({inheritClass:!0}),t.fn.select2&&(t(this).find(".select2").each(function(){var e=t(this).data("options")||{};e.width="100%",t(this).select2(e)}),t(this).find(".select2-ajax").each(function(){var e=t(this).data("url");t(this).select2({ajax:{headers:{Accept:"application/json"},dataType:"json",url:e,data:function(t){return{keyword:t.term}},processResults:function(t){return{results:t}}}}).on("select2:select",function(e){var a=t(this).data("cascade");if(a){var i=e.params.data,n=t(a).data("url");t.ajax({url:n,data:{id:i.id},success:function(e){t(a).replaceWith(e)}})}})})),t.fn.datetimepicker&&(t(this).find(".input-daterange").each(function(){var a=t(this);a.find("input").datetimepicker(e(a))}),t(this).find(".datetimepicker").each(function(){var a=t(this);a.datetimepicker(e(a))})),t.fn.wysiwyg_editor&&t(this).find(".summernote").each(function(){t(this).wysiwyg_editor()}),this},t.fn.attachFormEvents=function(){return 0!=t(this).length?(t(this).on("click",".top-menu .cancel > a",function(t){confirm("You have chosen to cancel data entry. Confirm action?")||t.preventDefault()}),t(this).on("click",".top-menu #print",function(){t(this).printReport({url:t(this).data("url"),form:document.getElementById("form-entry"),beforeSubmit:function(e){t(e).ajaxFormUnbind()},success:function(e){var a=t(e).find(".btn-primary[data-gritter-title]"),i=a.data("gritterTitle"),n=t(".inbox.new-message");t(e).attachAjaxForm({title:i,container:n})}})}),t(this).on("click",".inbox-nav-toggle",function(){t(".inbox-left-menu").toggleClass("active")}),t(this).on("click",".left-menu li a",function(){t(".left-menu li .fa").removeClass("fa-folder-open").addClass("fa-folder-o"),t(this).find(".fa").removeClass("fa-folder-o").addClass("fa-folder-open"),t(".inbox-left-menu").toggleClass("active")}),t(this).on("click",".sub-form a[data-cmd]",function(e){var a=t(this).data("cmd"),i=t(this).closest(".row"),n=t(this).closest(".container"),o=n.data("formUrl");switch(e.preventDefault(),a){case"add":var s={};n.find(".row").length&&(s.row_id=n.find(".display-row").length),t.ajax({type:"GET",url:o,data:s,success:function(t){n.append(t),n.find(".empty-row").addClass("hidden")}});break;case"delete":""===i.find("input[id$=id]").val()?i.remove():i.find("input[id$=deleted]").val("yes"),i.addClass("hidden"),0===n.find(".display-row:not(.hidden)").length&&n.find(".empty-row").removeClass("hidden")}}),t(this).on("change",".settings .onoffswitch input[type=checkbox]",function(){var e=(t(this).is(":checked"),t(this).attr("id").replace("switch-","")),a=t(this).closest(".settings"),i=a.find(".settings-values"),n=i.find(".settings-item[data-id$="+e+"]");if(t(this).is(":checked"))if(n.length>0)n.find("[id$=deleted]").val("no");else{var o=i.find(".settings-item").length,s=a.data("formUrl");t.ajax({type:"GET",url:s,data:{row_id:o,id:e},success:function(t){i.append(t)}})}else n.length>0&&n.find("[id$=deleted]").val("yes")}),t(this).on("click",".table-menu [data-cmd=add]",function(e){var a=t(this),i=a.closest(".tab-pane"),n=i.find("table[data-form-url]"),o=i.find("table[data-form-url]>tbody");e.preventDefault(),t.ajax({type:"POST",url:n.data("formUrl"),data:{row_id:o.children("tr[data-row-id]").length,_csrf:t("#_csrf").val()},success:function(t){-1!==t.indexOf("</tr>")?(o.find(".empty-row").addClass("hidden"),o.append(t)):(n.hide(),i.append(t),i.find(".table-form").validate())}})}),t(this).on("click","table .display-row td:not(.table-menu)",function(e){var a=t(this),i=a.closest("tr.display-row"),n=a.closest(".tab-pane"),o=n.find("table[data-form-url]"),s=(n.find("table[data-form-url]>tbody"),i.find("input").serializeObject(function(t){return t.replace(/^([\w\-\d]+\.)/,"")}));e.preventDefault(),s.row_id=i.data("rowId"),s._csrf=t("#_csrf").val(),t.ajax({type:"POST",url:o.data("formUrl"),data:s,success:function(t){o.hide(),n.append(t),n.find(".table-form").validate()}})}),t(this).on("click",".table-menu [data-cmd=update]",function(e){var a=t(this).closest(".tab-pane"),i=a.find("table[data-form-url]"),n=a.find("table[data-form-url]>tbody"),o=t(this).closest(".table-form"),s=t(this).closest(".edit-row"),r=o.data("rowId"),l=n.find(".display-row[data-row-id="+r+"]");e.preventDefault(),o.valid()&&o.ajaxSubmit({type:"POST",beforeSubmit:function(){o.simulateLoading()},success:function(t){o.remove(),s.remove(),0===l.length?n.append(t):l.replaceWith(t),n.find(".empty-row").addClass("hidden"),i.show()}})}),t(this).on("click",".table-menu [data-cmd=cancel]",function(e){var a=t(this).closest(".tab-pane"),i=a.find("table[data-form-url]"),n=a.find("table[data-form-url]>tbody"),o=t(this).closest(".table-form"),s=t(this).closest(".edit-row"),r=o.data("rowId"),l=n.find(".display-row[data-row-id="+r+"]");e.preventDefault(),o.remove(),s.remove(),l.removeClass("hidden"),i.show(),0===n.find(".display-row:not(.hidden)").length&&n.find(".empty-row").removeClass("hidden")}),t(this).on("click",".table-menu [data-cmd=delete]",function(e){var a=t(this).closest(".tab-pane"),i=a.find("table[data-form-url]"),n=a.find("table[data-form-url]>tbody"),o=t(this).data("rowId"),s=n.find("tr[data-row-id="+o+"]"),r=s.find("input[id$=deleted]");e.preventDefault(),r.val("yes"),s.removeClass("edit-row").addClass("hidden"),i.siblings(".table-form").remove(),i.show(),0===n.children("tr[data-row-id]:not(.hidden)").length&&n.find(".empty-row").removeClass("hidden")}),this):void 0},t.fn.attachAjaxForm=function(e){var a,i;e&&(a=e.title,i=e.container),t(this).ajaxForm({beforeSubmit:function(){i&&i.simulateLoading()},data:{submit:"submit"},success:function(e){i&&(i.html(e).attachFormPlugins(),i.find("ul.error>li").length&&a?t.gritter.add({title:a,text:"An error occured while saving to database."}):t.gritter.add({title:a,text:"Record has been successfully saved."}))},error:function(t){if("403"==t.status){var e=document.open("text/html","replace");e.write(t.responseText),e.close()}}})},t.resizeToFit=function(){var e=t(".top-bar"),a=t(".footer"),i=t(".content-wrapper"),n=i.find(".inbox-left-menu"),o=i.find(".messages"),s=i.find(".new-message-form"),r=t(window).innerHeight()-(e.outerHeight()+a.outerHeight());i.css("minHeight",r);var l=r-300;n.length>0&&n.outerHeight()>l&&(l=n.outerHeight()),o.css("minHeight",l),s.css("minHeight",l)}}(jQuery),$(function(){$(".main-menu .js-sub-menu-toggle").click(function(t){t.preventDefault();var e=$(this).parent("li");e.hasClass("active")?(e.find(" > a .toggle-icon").removeClass("fa-angle-down").addClass("fa-angle-left"),e.removeClass("active")):(e.find(" > a .toggle-icon").removeClass("fa-angle-left").addClass("fa-angle-down"),e.addClass("active")),e.find(" > .sub-menu").slideToggle(300)}),$(".js-toggle-minified").clickToggle(function(){$(".left-sidebar").addClass("minified"),$(".content-wrapper").addClass("expanded"),$(".left-sidebar .sub-menu").css("display","none").css("overflow","hidden"),$(".main-menu > li > a > .text").animate({opacity:0},200),$(".sidebar-minified").find("i.fa-angle-left").toggleClass("fa-angle-right")},function(){$(".left-sidebar").removeClass("minified"),$(".content-wrapper").removeClass("expanded"),$(".main-menu > li > a > .text").animate({opacity:1},600),$(".sidebar-minified").find("i.fa-angle-left").toggleClass("fa-angle-right")}),$(".main-nav-toggle").clickToggle(function(){$(".left-sidebar").slideDown(300)},function(){$(".left-sidebar").slideUp(300)}),$(window).on("resize",function(){var t=$(".left-sidebar");$(window).width()<977?t.hasClass("minified")&&t.removeClass("minified").addClass("init-minified"):t.hasClass("init-minified")&&t.removeClass("init-minified").addClass("minified"),$.resizeToFit()}),$("body").tooltip({selector:"[data-toggle=tooltip]"}),$(".alert").length>0&&$(".alert .close").click(function(t){t.preventDefault(),$(this).parents(".alert").fadeOut(300)}),$.resizeToFit();var t=$("#form-grid");t.length>0&&(t.ajaxForm({beforeSubmit:function(){$(".messages").simulateLoading()},success:function(t){$(".inbox-content").html(t)}}),$(".inbox.grid").attachGridPlugins());var e=$("#form-entry");if(e.length>0){var a=$(".inbox.new-message"),i=e.find(".btn-primary[data-gritter-title]"),n=i.data("gritterTitle");e.validate(),e.attachAjaxForm({title:n,container:a}),a.attachFormPlugins(),a.attachFormEvents()}});