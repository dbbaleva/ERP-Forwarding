function getRandomValues(){for(var e=new Array(20),t=0;t<e.length;t++)e[t]=[5+randomVal(),10+randomVal(),15+randomVal(),20+randomVal(),30+randomVal(),35+randomVal(),40+randomVal(),45+randomVal(),50+randomVal()];return e}function randomVal(){return Math.floor(80*Math.random())}if($(".number-chart .inlinesparkline").length>0){var randomVal=getRandomValues(),sparklineNumberChart=function(){var e={width:"140px",height:"30px",lineWidth:"2",lineColor:"#1D92AF",fillColor:!1,spotRadius:"2",highlightLineColor:"#aedaff",highlightSpotColor:"#71aadb",spotColor:!1,minSpotColor:!1,maxSpotColor:!1,disableInteraction:!1};$("#number-chart1").sparkline(randomVal[0],e),$("#number-chart2").sparkline(randomVal[1],e),$("#number-chart3").sparkline(randomVal[2],e),$("#number-chart4").sparkline(randomVal[3],e)};sparklineNumberChart()}var sparkResize;$(window).resize(function(e){clearTimeout(sparkResize),$(".sparkline-stat-item .inlinesparkline").length>0&&(sparkResize=setTimeout(sparklineStat,200)),$(".secondary-stat-item .inlinesparkline").length>0&&(sparkResize=setTimeout(sparklineWidget,200))}),$.validator&&$.validator.setDefaults({ignore:'input[type="hidden"], .tt-hint, .ignore',onkeyup:!1}),function(){for(var e,t=function(){},a=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],n=a.length,i=window.console=window.console||{};n--;)e=a[n],i[e]||(i[e]=t);Number.prototype.toFormattedString=function(e){return e||(e=2),this>=0?this.toFixed(e).replace(/\d(?=(\d{3})+\.)/g,"$&,"):"("+Math.abs(this).toFixed(e).replace(/\d(?=(\d{3})+\.)/g,"$&,")+")"},Array.prototype.remove=function(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)}}(),function(e){e.fn.clickToggle=function(t,a){return this.each(function(){var n=!1;e(this).bind("click",function(){return n?(n=!1,a.apply(this,arguments)):(n=!0,t.apply(this,arguments))})})},e.fn.simulateLoading=function(){e(this).append(e("<div/>",{"class":"loading",text:"Loading&hellip;"}))},e.fn.autoGrowInput=function(t){return t=e.extend({maxWidth:1e3,minWidth:0,comfortZone:50},t),this.filter("input:text").each(function(){var a=t.minWidth||e(this).width(),n="",i=e(this),o=e("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:i.css("fontSize"),fontFamily:i.css("fontFamily"),fontWeight:i.css("fontWeight"),letterSpacing:i.css("letterSpacing"),whiteSpace:"nowrap"}),s=function(){if(n!==(n=i.val())){var e=n.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");o.html(e);var s=o.width(),r=s+t.comfortZone>=a?s+t.comfortZone:a,d=i.width(),l=d>r&&r>=a||r>a&&r<t.maxWidth;l&&i.width(r)}};o.insertAfter(i),e(this).bind("keyup keydown blur update",s)}),this},e.fn.printReport=function(e){if(e){var t=e.url,a=e.form,n=a.action;if(e.beforeSubmit){var i=e.beforeSubmit(a);if(i===!1)return}a.action=t,a.target="_blank",a.submit(),a.action=n,a.target="_self",e.success&&e.success(a)}},e.fn.attachGridPlugins=function(){var t=e(document),a=e(this).find("#form-grid"),n=e("div.searchbox"),i=function(){n.find("input").css({textIndent:n.find(".tags").width()})},o=function(t){var a=e(t).data("tag"),n=a.split(":"),i=n[0].toLowerCase(),o=n[1].trim(),s=e("<span>",{"class":"tag label","data-tag-type":i,"data-tag-value":o}).text(a).append(e("<span>",{"data-role":"remove"}));return s},s=function(e){e.remove(),i(),d(),a.submit()},r=function(t){for(var a=e(t).attr("class").split(" "),n=0;n<a.length;n++)if(/^label/.test(a[n]))return a[n];return"label-info"},d=function(){var t=n.find(".tag"),i=a.find("#search-params");i.html(null),t.each(function(){var t=e("<input>",{type:"hidden",name:e(this).data("tagType"),value:e(this).data("tagValue")});i.append(t)})};t.on("click","div.searchbox",function(){e(this).addClass("focus"),e(this).find("input").focus()}),t.on("focusout","div.searchbox",function(){e(this).removeClass("focus")}),t.on("click","div.searchbox [data-role=remove]",function(){s(e(this).closest(".tag"))}),t.on("click",".inbox-left-menu .tags li a[data-remove-tag]",function(t){t.preventDefault();var a=n.find(".tags"),i=e(this).data("removeTag").toLowerCase(),o=a.find("[data-tag-type="+i+"]");s(o)}),t.on("click",".inbox-left-menu .tags li a[data-tag]",function(t){t.preventDefault();var s=o(this),l=s.data("tagType"),c=n.find(".tags"),f=c.find("[data-tag-type="+l+"]"),u=r(e(this).closest("li").find("i"));s.addClass(u),f.length>0&&f.remove(),c.append(s),i(),d(),a.submit()}),t.on("click","#refresh",function(){a.submit()}),t.on("click","#print",function(){var t=e("<div/>");e(this).printReport({url:e(this).data("url"),form:document.getElementById("form-grid"),beforeSubmit:function(){var a=e(".message-table tr.highlighted");if(a.length<=0)return!1;var n=document.getElementById("form-grid");e.each(a,function(a,n){var i=e("<input/>",{type:"hidden",name:"id-"+a,value:e(this).data("uid")});t.append(i)}),e(n).append(t)},success:function(){t.remove()}})}),t.on("click",".inbox-nav-toggle",function(){e(".inbox-left-menu").toggleClass("active")}),t.on("click",".pager li > a",function(t){if(t.preventDefault(),!e(this).hasClass("disabled")){var n=e(this).find("i"),i=n.hasClass("fa-angle-left")?-1:n.hasClass("fa-angle-right")?1:0,o=e(this).closest(".pager"),s=parseInt(o.data("currentpage"))+i,r=a.attr("action");e(".messages").simulateLoading(),a.ajaxSubmit({type:"POST",url:r,data:{page:s},success:function(t){e(".inbox-content").html(t)}})}}),t.on("change",".message-table .fancy-checkbox",function(t){t.stopPropagation(),e(this).find(":checkbox").is(":checked")?e(this).parents("tr").addClass("highlighted"):e(this).parents("tr").removeClass("highlighted"),e(".message-table tr.highlighted").length>0?(e(".top-menu .context-menu").removeClass("hide"),e(".top-menu .toggle-menu").addClass("hide")):(e(".top-menu .context-menu").addClass("hide"),e(".top-menu .toggle-menu").removeClass("hide")),e(".top-menu .fancy-checkbox-all").find(":checkbox").prop("checked",0===e(".message-table tr:not(.highlighted)").length)}),t.on("change",".top-menu .fancy-checkbox-all",function(){var t=e(".message-table tr:not(.empty-row)");0!=t.length&&(e(this).find(":checkbox").is(":checked")?(t.find(".fancy-checkbox>:checkbox").prop("checked",!0),t.addClass("highlighted"),e(".top-menu .context-menu").removeClass("hide"),e(".top-menu .toggle-menu").addClass("hide")):(t.find(".fancy-checkbox>:checkbox").prop("checked",!1),t.removeClass("highlighted"),e(".top-menu .context-menu").addClass("hide"),e(".top-menu .toggle-menu").removeClass("hide")))}),t.on("click",".row-update:not(.disabled)",function(t){var n=e(this).data("update"),i=e(this).data("updateType").toLowerCase(),o=e(this).closest("[data-url]"),s=o.data("url"),r=e(".message-table tr.highlighted");if(t.preventDefault(),e(".dropdown-toggle").parent().removeClass("open"),r.length>0&&confirm("This will update "+r.length+" record(s) to "+n.toUpperCase()+" "+i+".\n Confirm action?")){var d={};d["new-"+i]=n,e.each(r,function(t,a){d["id-"+t]=e(this).data("uid")}),e(".messages").simulateLoading(),a.ajaxSubmit({type:"POST",url:s,data:d,success:function(t){e(".inbox-content").html(t)},error:function(e){if("403"==e.status){var t=document.open("text/html","replace");t.write(e.responseText),t.forms[0].elements.came_from.value=location.href,t.close()}}})}})},e.fn.serializeObject=function(t){var a={},n=this.serializeArray();return e.each(n,function(){var e=this.name;t&&(e=t(e)),void 0!==a[e]?(a[e].push||(a[e]=[a[e]]),a[e].push(this.value||"")):a[e]=this.value||""}),a},e.fn.attachFormPlugins=function(){var t=function(e){var t=e.data(),a={};for(var n in t)if(/^options/.test(n)){var i=n.replace(/^options/,""),o=i.toLowerCase();i.length>1&&(o=i.substr(0,1).toLowerCase()+i.substr(1)),a[o]=t[n]}return a};return e.fn.multiselect&&e(this).find(".multiselect").multiselect({inheritClass:!0}),e.fn.select2&&(e(this).find(".select2").each(function(){var t=e(this).data("options")||{};t.width="100%",e(this).select2(t)}),e(this).find(".select2-ajax").each(function(){var t=e(this).data("url");e(this).select2({ajax:{headers:{Accept:"application/json"},dataType:"json",url:t,data:function(e){return{keyword:e.term}},processResults:function(e){return{results:e}}}}).on("select2:select",function(t){var a=e(this).data("cascade");if(a){var n=t.params.data,i=e(a).data("url");e.ajax({url:i,data:{id:n.id},success:function(t){e(a).replaceWith(t)}})}})})),e.fn.datetimepicker&&(e(this).find(".input-daterange").each(function(){var a=e(this);a.find("input").datetimepicker(t(a))}),e(this).find(".datetimepicker").each(function(){var a=e(this);a.datetimepicker(t(a))})),e.fn.summernote&&e(this).find(".summernote").each(function(){var t=e(this),a=parseInt(t.data("height")||"300");t.summernote({toolbar:[["style",["bold","italic","underline","clear"]],["font",["strikethrough","superscript","subscript"]],["fontsize",["fontname","fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]]],height:a,onBlur:function(){var a=t.data("input");e(a).val(e(this).code())}})}),this},e.fn.attachFormEvents=function(){return 0!=e(this).length?(e(document).on("click",".top-menu .cancel > a",function(e){confirm("You have chosen to cancel data entry. Confirm action?")||e.preventDefault()}),e(document).on("click",".top-menu #print",function(){e(this).printReport({url:e(this).data("url"),form:document.getElementById("form-entry"),beforeSubmit:function(t){e(t).ajaxFormUnbind()},success:function(t){var a=e(t).find(".btn-primary[data-gritter-title]"),n=a.data("gritterTitle"),i=e(".inbox.new-message");e(t).attachAjaxForm({title:n,container:i})}})}),e(document).on("click",".inbox-nav-toggle",function(){e(".inbox-left-menu").toggleClass("active")}),e(document).on("click",".left-menu li a",function(){e(".left-menu li .fa").removeClass("fa-folder-open").addClass("fa-folder-o"),e(this).find(".fa").removeClass("fa-folder-o").addClass("fa-folder-open"),e(".inbox-left-menu").toggleClass("active")}),e(document).on("click",".sub-form a[data-cmd]",function(t){var a=e(this).data("cmd"),n=e(this).closest(".row"),i=e(this).closest(".container"),o=i.data("formUrl");switch(t.preventDefault(),a){case"add":var s={};i.find(".row").length&&(s.row_id=i.find(".display-row").length),e.ajax({type:"GET",url:o,data:s,success:function(e){i.append(e),i.find(".empty-row").addClass("hidden")}});break;case"delete":""===n.find("input[id$=id]").val()?n.remove():n.find("input[id$=deleted]").val("yes"),n.addClass("hidden"),0===i.find(".display-row:not(.hidden)").length&&i.find(".empty-row").removeClass("hidden")}}),e(document).on("change",".inbox.new-message .settings .onoffswitch input[type=checkbox]",function(){var t=(e(this).is(":checked"),e(this).attr("id").replace("switch-","")),a=e(this).closest(".settings"),n=a.find(".settings-values"),i=n.find(".settings-item[data-id$="+t+"]");if(e(this).is(":checked"))if(i.length>0)i.find("[id$=deleted]").val("no");else{var o=n.find(".settings-item").length,s=a.data("formUrl");e.ajax({type:"GET",url:s,data:{row_id:o,id:t},success:function(e){n.append(e)}})}else i.length>0&&i.find("[id$=deleted]").val("yes")}),e(document).on("click",".table-menu [data-cmd=add], table .display-row td:not(.table-menu)",function(t){var a=e(this).closest(".tab-pane"),n=a.find("table"),i=n.find("tbody"),o=e(this).data("cmd"),s=e(this).closest("tr.display-row"),r=s.data("rowId"),d={};t.preventDefault(),"add"===o?r=i.find("tr:not(.empty-row)").length:d=s.find("input").serializeObject(function(e){return e.replace(/^([\w\-\d]+\.)/,"")}),d.row_id=r,d._csrf=e("#_csrf").val(),e.ajax({type:"POST",url:n.data("formUrl"),data:d,success:function(t){-1!==t.indexOf("</tr>")?(i.find(".empty-row").addClass("hidden"),"add"===o?i.append(t):(s.addClass("hidden"),e(t).insertAfter(s))):(n.hide(),a.append(t)),a.find(".table-form").validate()}})}),e(document).on("click",".table-menu [data-cmd=update]",function(t){var a=e(this).closest(".tab-pane"),n=a.find("table"),i=n.find("tbody"),o=e(this).closest(".table-form"),s=e(this).closest(".edit-row"),r=o.data("rowId"),d=i.find(".display-row[data-row-id="+r+"]");t.preventDefault(),o.valid()&&o.ajaxSubmit({type:"POST",beforeSubmit:function(){o.simulateLoading()},success:function(e){o.remove(),s.remove(),0===d.length?i.append(e):d.replaceWith(e),i.find(".empty-row").addClass("hidden"),n.show()}})}),e(document).on("click",".table-menu [data-cmd=cancel]",function(t){var a=e(this).closest(".tab-pane"),n=a.find("table"),i=n.find("tbody"),o=e(this).closest(".table-form"),s=e(this).closest(".edit-row"),r=o.data("rowId"),d=i.find(".display-row[data-row-id="+r+"]");t.preventDefault(),o.remove(),s.remove(),d.removeClass("hidden"),n.show(),0===i.find(".display-row:not(.hidden)").length&&i.find(".empty-row").removeClass("hidden")}),e(document).on("click",".table-menu [data-cmd=delete]",function(t){var a=e(this).closest(".tab-pane"),n=a.find("table"),i=n.find("tbody"),o=e(this).data("rowId"),s=i.find("tr[data-row-id="+o+"]"),r=s.find("input[id$=deleted]");t.preventDefault(),r.val("yes"),s.removeClass("edit-row").addClass("hidden"),a.find(".table-form").remove(),n.show(),0===i.find(".display-row:not(.hidden)").length&&i.find(".empty-row").removeClass("hidden")}),this):void 0},e.fn.attachAjaxForm=function(t){var a,n;t&&(a=t.title,n=t.container),e(this).ajaxForm({beforeSubmit:function(){n&&n.simulateLoading()},data:{submit:"submit"},success:function(t){n&&(n.html(t).attachFormPlugins(),n.find("ul.error>li").length&&a?e.gritter.add({title:a,text:"An error occured while saving to database."}):e.gritter.add({title:a,text:"Record has been successfully saved."}))},error:function(e){if("403"==e.status){var t=document.open("text/html","replace");t.write(e.responseText),t.close()}}})}}(jQuery),$(function(){var e=function(){var e=$(".top-bar"),t=$(".footer"),a=$(".content-wrapper"),n=a.find(".inbox-left-menu"),i=a.find(".messages"),o=a.find(".new-message-form"),s=$(window).innerHeight()-(e.outerHeight()+t.outerHeight());a.css("minHeight",s);var r=s-300;n.length>0&&n.outerHeight()>r&&(r=n.outerHeight()),i.css("minHeight",r),o.css("minHeight",r)};$(".main-menu .js-sub-menu-toggle").click(function(e){e.preventDefault();var t=$(this).parent("li");t.hasClass("active")?(t.find(" > a .toggle-icon").removeClass("fa-angle-down").addClass("fa-angle-left"),t.removeClass("active")):(t.find(" > a .toggle-icon").removeClass("fa-angle-left").addClass("fa-angle-down"),t.addClass("active")),t.find(" > .sub-menu").slideToggle(300)}),$(".js-toggle-minified").clickToggle(function(){$(".left-sidebar").addClass("minified"),$(".content-wrapper").addClass("expanded"),$(".left-sidebar .sub-menu").css("display","none").css("overflow","hidden"),$(".main-menu > li > a > .text").animate({opacity:0},200),$(".sidebar-minified").find("i.fa-angle-left").toggleClass("fa-angle-right")},function(){$(".left-sidebar").removeClass("minified"),$(".content-wrapper").removeClass("expanded"),$(".main-menu > li > a > .text").animate({opacity:1},600),$(".sidebar-minified").find("i.fa-angle-left").toggleClass("fa-angle-right")}),$(".main-nav-toggle").clickToggle(function(){$(".left-sidebar").slideDown(300)},function(){$(".left-sidebar").slideUp(300)}),$(window).on("resize",function(){var t=$(".left-sidebar");$(window).width()<977?t.hasClass("minified")&&t.removeClass("minified").addClass("init-minified"):t.hasClass("init-minified")&&t.removeClass("init-minified").addClass("minified"),e()}),$("body").tooltip({selector:"[data-toggle=tooltip]"}),$(".alert").length>0&&$(".alert .close").click(function(e){e.preventDefault(),$(this).parents(".alert").fadeOut(300)});var t=$("#form-grid");t.length>0&&(t.ajaxForm({beforeSubmit:function(){$(".messages").simulateLoading()},success:function(e){$(".inbox-content").html(e)}}),$(".inbox.grid").attachGridPlugins());var a=$("#form-entry");if(a.length>0){var n=$(".inbox.new-message"),i=a.find(".btn-primary[data-gritter-title]"),o=i.data("gritterTitle");a.validate(),a.attachAjaxForm({title:o,container:n}),n.attachFormPlugins(),n.attachFormEvents()}e()});